<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mju.bishe.mapper.WorkloadMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.mju.bishe.entity.Workload">
        <id column="id" property="id" />
        <result column="school_year" property="schoolYear" />
        <result column="school_term" property="schoolTerm" />
        <result column="teacher_id" property="teacherId" />
        <result column="theoretical_wordload" property="theoreticalWordload" />
        <result column="practical_wordload" property="practicalWordload" />
        <result column="classroom" property="classroom" />
        <result column="class_type" property="classType" />
        <result column="language" property="language" />
        <result column="student_count" property="studentCount" />
        <result column="class_hours" property="classHours" />
        <result column="course_id" property="courseId" />
    </resultMap>
    <resultMap id="courseResultMap" type="com.mju.bishe.entity.Workload" extends="BaseResultMap">
        <association column="course_id" property="course" select="com.mju.bishe.mapper.CourseMapper.selectById"/>
        <association column="teacher_id" property="teacher" select="com.mju.bishe.mapper.TeacherMapper.selectById"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        w.id, w.school_year, w.school_term, w.teacher_id,w.theoretical_wordload,w.practical_wordload,w.classroom, w.class_type, w.language, w.student_count, w.class_hours, w.course_id
    </sql>
    <select id="getList" resultMap="courseResultMap">
        select <include refid="Base_Column_List"/>,t.name,t.positional_title "positionalTitle",t.type "type"
        from workload w,teacher t where w.teacher_id = t.id
        <if test="queryfilter.name!=null and queryfilter.name!=''">
        and t.name like concat('%',#{queryfilter.name},'%')
        </if>
    </select>

</mapper>
